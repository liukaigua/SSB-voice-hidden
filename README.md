# SSB-voice-hidden
基于单边带调制的隐蔽语音传输方案具有简单低廉等特点，能够在不改变现有手机软硬件结构的情况下实现隐蔽语音传输，关于本方案的原理、特点等请参考[原文]((http://www.jas.shu.edu.cn/CN/10.3969/j.issn.0255-8297.2019.05.006))。

本仓库包含以下内容：
1. 给出上述方案的Python实现
2. 给出基于树莓派的原型系统搭建方法

## Demo
[视频 Demo](https://www.bilibili.com/video/av73120355/)

## Install
```sh
$ git clone https://github.com/lsccccc/SSB-voice-hidden.git
```

## Usage
可以在电脑上运行，也可以使用树莓派搭建原型系统，本节首先介绍源码中各的文件。

### 各文件介绍
1. **get_index.py** 获取音频设备名称及编号；
2. **play.py** 使用 [Pyaudio](https://people.csail.mit.edu/hubert/pyaudio/#sources) 库进行音频播放；
3. **tools.py** 语音隐藏及提取过程中用到的几个方法；
4. **hide_with_file.py** 使用音频文件作为载体信号实现语音隐藏；
5. **hide_real_time.py** 使用一个麦克风实时录音作为载体信号实现语音隐藏，将合成的语音发送出去，同时使用另一个麦克风接收合成语音，最后从中提取隐藏语音；
6. **only_send.py** 是 hide_real_time.py 中的发送部分，进行实时语音隐藏，但不接收合成语音；
7. **only_rec.py** 是 hide_real_time.py 中的接收部分，接收合成语音并从中提取隐藏语音，但不进行实时的语音隐藏。

### 参数设置
1. 载频：单边带调制的载波频率，如果载频较高，则合成语音有明显的啸叫声，故应该设置较低的载频，理想情况下应该设置在人耳感受不到的低频频带，即300Hz以下。但是，语音压缩算法往往会削弱300Hz以下的信号，从而破坏隐蔽语音成分，因此载频的选择应该在人耳听力范围和手机压缩算法能力之间进行折中选择。
2. 压缩比：压缩比即隐藏语音的压缩倍数，应设置的尽可能大，将隐藏语音频带压缩的尽可能窄，这样就可以将压缩后的隐藏语音调制到人耳感受不到的低频频带。然而，压缩比大的代价是时域上被拉得很长，则需要更长时长的载频，造成隐蔽语音传输效率降低。 因此，压缩比的选择应该在正常语音失真度和隐蔽语音传输效率上进行折中。

### 在PC上运行
1. 建立文件夹 **wav_file**，将隐藏语音（watermark.wav）和载体语音（carrier.wav）放到该文件夹，或者使用其他文件名，只需要将源码中的文件路径做相应修改。
2. 在终端或编辑器中运行 **hide_with_file.py** 即可。

### 使用树莓派搭建原型系统
请参阅[使用树莓派进行语音隐藏](http://note.youdao.com/noteshare?id=921b209d17dbb090f2e87c64df46ccee&sub=82E0F846F5FD494AB904A15A7A24900A)。
